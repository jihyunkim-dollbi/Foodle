<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.retaurant-themalist-mapper">
<!-- t_MainThema= #{menuName} -->
	<resultMap type="MainInfoVO" id="mainInforMap">
		<result column="rno" property="rNo"/>
		<result column="rname" property="rName"/>
		<result column="rtype" property="rType"/>
		<result column="rtel" property="rTel"/>
		<result column="rscore" property="rScore"/>
		<result column="rscorecount" property="rScoreCount"/>
		<result column="raddr1" property="rAddr1"/>
		<result column="raddr2" property="rAddr2"/>
		<result column="rpwd" property="rPwd"/>
		<result column="rarea" property="rArea"/>
		<result column="rareadetail" property="rAreaDetail"/>
		<result column="iname" property="ivo.iName"/>
		<result column="ilink" property="ivo.iLink"/>
	</resultMap>
	
	


	<select id="cateSelectData" resultType="MainThemaVO" parameterType="java.util.Map">
		SELECT t_MainThema, t_DetailThema, t_Info 
		FROM mainThema
		WHERE REGEXP_LIKE(t_MainThema,#{fd})
	</select>	

<!-- 상황별 개수 알기! -->
<select id="countBigThema" resultType="MainThemaVO">
	SELECT t_MainThema, COUNT(*) as themaCount
	FROM MainThema
	GROUP BY t_MainThema
</select>

<select id="resultThemaList" resultType="MainInfoVO" parameterType="java.util.Map">
	SELECT 
	FROM mainThema
	WHERE REGEXP_LIKE(t_DetailThema,#{fo})
</select>

<select id="searchThema" resultMap="mainInforMap" parameterType="java.util.Map">
	
	 SELECT mai.rno,
            mai.rname,
            mai.rtype,
            mai.rtel,
            mai.raddr2,
            img.iName,
            img.iLink
     FROM maininfo mai,
          infothema info,
          detailthema detail,
          image img
        where mai.rno=info.rno 
    	AND info.rthema=detail.t_info
    	AND detail.t_detailThema=#{fd}
    	AND mai.rno=img.rno
		AND img.iname='Mainimage'    	
    	AND mai.rno <![CDATA[ <  ]]> 100
</select>





</mapper>