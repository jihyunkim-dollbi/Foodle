<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.restaurantdetail-mapper">

	<select id="resDetailMaininfo" resultType="MainInfoVO" parameterType="int">
		SELECT * FROM maininfo
		WHERE rno=#{no}
	</select>
	
	<select id="resDetailSubinfo" resultType="SubinfoVO" parameterType="int">
		SELECT * FROM subinfo
		WHERE rno=#{no}
	</select>
	
	<select id="resDetailReserveinfo" resultType="ReserveInfoVO" parameterType="int">
		SELECT * FROM reserveinfo
		WHERE rno=#{no}
	</select>
	
	<select id="resDetailMenu" resultType="MenuVO" parameterType="int">
		SELECT * FROM menu
		WHERE rno=#{no}
	</select>
	
	<select id="resDetailImage" resultType="ImageVO" parameterType="int">
		SELECT rNo,iName,iLink FROM image
		WHERE rNo=#{no} AND rownum&lt;=6
	</select>
	
	
	<!-- 찜 체크 -->
	<select id="myWishCheck" resultType="int" parameterType="hashMap">
		SELECT COUNT(*) FROM mywish
		WHERE rno=#{rno} AND userid=#{id}
	</select>
	
	
	<!-- 찜 INSERT -->
	<insert id="myWishInsert" parameterType="hashMap">
		INSERT INTO mywish VALUES(
			(SELECT NVL(MAX(wishno)+1,1) FROM mywish),
			#{rno},#{id},SYSDATE
		)
	</insert>
	
	<!-- 찜 DELETE -->
	<delete id="myWishDelete" parameterType="hashMap">
		DELETE FROM mywish
		WHERE rno=#{rno} AND userid=#{id}
	</delete>
	
	<!-- 찜 리스트 가져오기 -->
	<!-- <select id="myWishList" resultType="MyWishVO" parameterType="String">
		SELECT wishno,rno,regdate
		FROM mywish
		WHERE userid=#{id}
	</select> -->
	
</mapper>